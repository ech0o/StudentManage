(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2176c7"],{c752:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"content-wrap"},[t._m(0),a("el-card",[a("div",{staticClass:"button-wrapper"},[a("el-button",{staticStyle:{float:"right"},on:{click:function(e){return t.handleCreate()}}},[a("i",{staticClass:"el-icon-plus"}),t._v("添加 ")])],1),a("div",{staticClass:"table-wrap"},[a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"name",label:"班级",width:"180"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.getStudent(e.row)}}},[t._v("详情")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{layout:"prev,pager,next","current-page":t.currentPage,total:t.total,"page-size":t.pageSize},on:{"current-change":t.currentChange}})],1)])],1),a("el-dialog",{attrs:{visible:t.dialogFormShow,title:t.dialogStatus[t.flag],width:"500px",center:""},on:{"update:visible":function(e){t.dialogFormShow=e}}},[a("el-form",{ref:"dialog",attrs:{model:t.dialog,size:"mini",rules:t.checkRule()}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:t.dialog.name,callback:function(e){t.$set(t.dialog,"name",e)},expression:"dialog.name"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){"edit"===t.flag?t.editGrade():t.CreateGrade()}}},[t._v("提交")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormShow=!1}}},[t._v("取消")])],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-wrap"},[a("h2",[t._v("班级管理")])])}],s=(a("b0c0"),a("982e")),r=a("4360"),l={name:"GradeManage",data:function(){return{tableData:[],dialogFormShow:!1,dialog:{id:void 0,name:""},dialogStatus:{create:"添加班级",edit:"修改班级"},flag:"",total:0,pageSize:5,currentPage:1,rule_create:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},rule_edit:{name:[{required:!0,message:"请输入名称",trigger:"change"}]}}},created:function(){this.getClassByPage()},methods:{getClassByPage:function(){var t=this;Object(s["d"])(this.currentPage,this.pageSize).then((function(e){e&&(t.tableData=e.data.data,t.total=e.data.total)})).catch((function(e){t.$message(e)}))},currentChange:function(t){this.currentPage=t,this.getClassByPage()},handleCreate:function(){var t=this;this.flag="create",this.dialogFormShow=!0,this.$nextTick((function(){t.$refs["dialog"].resetFields()}))},checkRule:function(){return"create"===this.flag?this.rule_create:this.rule_edit},CreateGrade:function(){var t=this;this.$refs["dialog"].validate((function(e){if(!e)return!1;Object(s["a"])(t.dialog).then((function(e){200===e.status&&(t.dialogFormShow=!1,t.$message({type:"success",message:"添加成功"}),t.getClassByPage(),r["a"].dispatch("grade/getClasses"))})).catch((function(){t.$message.error("添加失败")}))}))},getStudent:function(t){this.$router.push("/manage/class/"+t.id)},handleEdit:function(t){var e=this;this.dialogFormShow=!0,this.flag="edit",this.$nextTick((function(){e.$refs["dialog"].resetFields()})),this.$nextTick((function(){e.dialog.id=t.id,e.dialog.name=t.name}))},editGrade:function(){var t=this;this.$refs["dialog"].validate((function(e){if(!e)return!1;Object(s["e"])(t.dialog).then((function(e){200===e.status&&(t.dialogFormShow=!1,t.$message({message:"修改成功",type:"success"}),t.getClassByPage(),r["a"].dispatch("grade/getClasses"))})).catch((function(){t.$message.error("添加失败")}))}))},handleDelete:function(t){var e=this;this.$confirm("是否删除","提示",{comfirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])(t.id).then((function(t){200===t.status&&(e.$message({message:"删除成功",type:"success"}),1!==e.currentPage&&1==e.tableData.length&&(e.currentPage=e.currentPage-1),e.getClassByPage(),r["a"].dispatch("grade/getClasses"))})).catch((function(){e.$message("删除失败")}))}))}}},o=l,c=a("2877"),u=Object(c["a"])(o,i,n,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d2176c7.e7b6c8e6.js.map